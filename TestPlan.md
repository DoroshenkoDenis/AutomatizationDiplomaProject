# План автоматизации тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка.

## 1. Введение
* Будет проводиться внедрение автоматизации тестирования веб-сервиса, предоставляющего возможность покупки
  тура по определённой цене с помощью дебетовой карты или кредита. Покупка производиться путём указания данных карты в веб форме.
* Критериями успешного тестирования являются:
    * Возможность купить тур при корректном заполнении формы с использованием карты (status APPROVED)
    * Невозможность купить тур и получение уведомлений о некорректном заполнении полей формы, в том числе при корректном заполнении с использованием 
    карты (status DECLINED)
    ![Image 3](https://user-images.githubusercontent.com/47859608/123832926-eb974780-d916-11eb-87b9-bca0f1830aa8.png)

___

## 2. Виды тестирования
1. UI - тестирование
* Функциональное тестирование формы платежа
* Негативное тестирование полей формы платежа
* Тестирование граничных значений полей "Номер карты", "Месяц", "Год", "CVC/CVV"
2. API - тестирование
* интеграционное тестирование базы данных
___

## 3. Перечень автоматизируемых сценариев
### **UI - тестирование**
### Предусловие 1 : "Купить"
* Открыть главную страницу сервиса http://localhost:8080/
* Нажать кнопку "Купить"

Сценарий 1.1 "Успешная покупка"
* Номер карты: "4444 4444 4444 4441" (status: APPROVED)
* Месяц от "01 до 12" и год "от текущий до + 4 года", таким образом, чтобы в совокупности дата окончания действия карты была больше или равна текущей дате
* Владелец: как на карте, заглавные латинские буквы через пробел "NAME SURNAME"  
* CVC/CVV код: три цифры
* Нажать кнопку "Продолжить"
* Ожидаемый результат: 
    * запрос в банк отправляется
    * уведомление "Операция одобрена банком"
    
Сценарий 1.2 "Карта отклонена 1"
* Повторить Сценарий 1.1, используя номер карты: "4444 4444 4444 4442" (status: DECLINED)
* Ожидаемый результат:
    * запрос в банк отправляется
    * уведомление "Ошибка! Банк отказал в проведении операции."

Сценарий 1.3 "Карта отклонена 2"
* Повторить Сценарий 1.1, используя номер карты другого банка: "4177 1806 4564 6257"
* Ожидаемый результат:
    * запрос в банк отправляется
    * уведомление "Ошибка! Банк отказал в проведении операции."

Сценарий 1.4 "Пустые поля"
* Нажать кнопку "Продолжить"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение в поле "Владелец": "Поле обязательно для заполнения"
    * в остальных полях предупреждение: "Неверный формат"
    
Сценарий 1.5 "Неполный номер карты 15 знаков"
* Повторить Сценарий 1.1, используя неполный номер карты: "4444 4444 4444 444"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"
    
Сценарий 1.6 "Неполный номер карты 1 знак"
* Повторить Сценарий 1.1, используя неполный номер карты: "4"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.7 "Некорректный номер месяца 1"
* Повторить Сценарий 1.1, используя номер месяца "0"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.8 "Некорректный номер месяца 2"
* Повторить Сценарий 1.1, используя номер месяца "00"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.9 "Некорректный номер месяца 3"
* Повторить Сценарий 1.1, используя номер месяца больше "от 13 до 99"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверно указан срок действия карты"

Сценарий 1.10 "Некорректный номер месяца 4"
* Повторить Сценарий 1.1, используя текущий год и прошлый номер месяца
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Истёк срок действия карты"

Сценарий 1.11 "Некорректный номер года 1"
* Повторить Сценарий 1.1, используя номер года "0"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.12 "Некорректный номер года 2"
* Повторить Сценарий 1.1, используя номер года "00"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.13 "Некорректный номер года 3"
* Повторить Сценарий 1.1, используя текущий месяц и прошлый номер года 
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Истёк срок действия карты"
    
Сценарий 1.14 "Некорректный номер года 4"
* Повторить Сценарий 1.1, используя год окончания действия карты "через 6 и более лет от текущего"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверно указан срок действия карты"

Сценарий 1.15 "Некорректное имя владельца"
* Повторить Сценарий 1.1, используя имя отличное от формата "NAME SURNAME"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.16 "Некорректный номер CVC/CVV"
* Повторить Сценарий 1.1, используя CVC/CVV "от 0 до 99"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

Сценарий 1.17 "Некорректный номер CVC/CVV"
* Повторить Сценарий 1.1, используя CVC/CVV "000"
* Ожидаемый результат:
    * запрос в банк не отправляется
    * предупреждение "Неверный формат"

### Предусловие 2 : "Купить в кредит"
* Открыть главную страницу сервиса http://localhost:8080/
* Нажать кнопку "Купить в кредит"

Сценарий 2.1 "Успешная покупка в кредит, используя карту "4444 4444 4444 4441" status: APPROVED"
* Повторить Сценарий 1.1
* Ожидаемый результат:
    * запрос в банк отправляется
    * уведомление "Операция одобрена Банком"

Сценарий 2.2 "Покупка в кредит через карту "4444 4444 4444 4442" status: DECLINED"
* Повторить Сценарий 1.2
* Ожидаемый результат:
    * запрос в банк отправляется
    * уведомление "Операция одобрена Банком"


### **API - тестирование**

Сценарий 3.1
* POST запрос по адресу http://localhost:8080/api/v1/pay
*   {number: "4444 4444 4444 4441", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
* ожидаемый результат:
  * код 200 OK
  * ![Image 1](https://user-images.githubusercontent.com/47859608/123833172-20a39a00-d917-11eb-93e1-3295abbf8f5b.png)
  * response "status: APPROVED"

    
Сценарий 3.2
* POST запрос по адресу http://localhost:8080/api/v1/pay
*   {number: "4444 4444 4444 4442", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
    * ожидаемый результат:
    * код 200 OK
    * response "status: DECLINED"
    
Сценарий 3.3
* POST запрос по адресу http://localhost:8080/api/v1/credit
*   {number: "4444 4444 4444 4441", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
* ожидаемый результат:
  * код 200 OK
  * ![Image 2](https://user-images.githubusercontent.com/47859608/123833132-184b5f00-d917-11eb-98d4-e391e3541371.png)
  * response "status: APPROVED"
  
Сценарий 3.4
* POST запрос по адресу http://localhost:8080/api/v1/credit
* {number: "4444 4444 4444 4442", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
* ожидаемый результат:
    * код 200 OK
    * response "status: APPROVED"

Сценарий 3.5
* POST запрос по адресу http://localhost:8080/api/v1/pay
* {number: "4444 6666 5555 3333", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
* ожидаемый результат:
  * код 500 
  * response "message: 400 Bad Request"

Сценарий 3.6
* POST запрос по адресу http://localhost:8080/api/v1/credit
* {number: "4444 6666 5555 3333", year: "22", month: "12", holder: "DENIS DOROSHENKO", cvc: "777"}
* ожидаемый результат:
  * код 500 
  * response "message: 400 Bad Request"

___
## 4. Перечень используемых инструментов:
* Java 11 - популярная версия языка программирования на котором разрабатывается ПО;
* IntelliJ IDEA - удобная среда разработки для JAVA;
* Gradle - популярная за счёт скорости и простоты система автоматической сборки;
* JUnit 5 - популярный тестовый фреймворк с вложенными и параметризованными тестами;
* REST Assured - Java DSL (Domain Specific Languages) для упрощения тестирования служб на основе REST, построенных на основе HTTP Builder.
 Он поддерживает запросы POST, GET, PUT, DELETE, OPTIONS, PATCH и HEAD и может использоваться для верификации и валидации ответа на эти запросы.
* Selenide - фреймворк для тестирования веб-приложений на основе Selenium WebDriver,
  осуществляет управление браузером, создаёт автоматические скриншоты;
* DbUtils - набор классов, предназначенный для упрощения работы с JDBC.
 Основные классы / интерфейсы в DbUtils - это QueryRunner и ResultSetHandler
* Faker - генерация пользовательских данных;
* SLF4J (Simple Logging Facade for Java) — библиотека для протоколирования, ставящая своей целью предоставить максимально простой,
  но при этом мощный фасад для различных систем протоколирования на Java. Simple — использование стандартного вывода для логов
* JDBC Driver – (Java DataBase Connectivity — соединение с базами данных на Java) — платформенно-независимый промышленный стандарт взаимодействия Java-приложений с различными СУБД,
  реализованный в виде пакета java.sql, входящего в состав Java SE. JDBC – позволяет получать доступ к БД, а также выполнять к ней SQL запросы.
    * Mysql-connector
    * PostgreSQL JDBC Driver
* GSON - библиотека Google, позволяющая конвертировать объекты JSON в Java-объекты и наоборот
* Lombok - плагин, предоставляет аннотации, позволяющие сократить время написания кода
* Docker - для развертывания виртуальных контейнеров баз данных, а также эмулятора сервисов банка на NodeJS
* Git - система контроля версий, позволяющая вести параллельную разработку
* GitHub - удалённое хранилище проекта.
* Allure - автоматическое создание отчётов.
* Appveyor - система CI CD.
___
## 5. Перечень и описание возможных рисков при автоматизации
* Высокая стоимость используемых инструментов
* Большие сроки написания тестов, возможна потеря актуальности некоторых тестов, если покупательское предложение ограничено во времени
* Необходимость поддержки тестов
___
## 6. Перечень необходимых специалистов для автоматизации
* Automation QA Engineer - 1
___
## 7. Интервальная оценка с учётом рисков (в часах)
* Разработка плана тестирования - 8 часов;
* Развёртывание окружения - 4 часа;
* Написание авто-тестов - 24 часа;
* Баг-репорты - 4 часа;
* Подготовка отчета о тестировании - 2 часа;
* Подготовка отчета о проделанной работе - 1 час.
___
* **Итого:** 43 часа
___
## 8. План сдачи работ
* Написание кода и тестов - 7 рабочих дней после окончательного утверждения плана;
* Отчёты - 1 рабочий день после код ревью.
